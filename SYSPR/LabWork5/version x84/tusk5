%include "io.inc"

section .data
    p_n     db "Сколько чисел будете вводить? (>0): ", 0
    p_num   db "Введите число: ", 0
    p_sum   db "Сумма = ", 0

section .bss
    count   resd 1
    number  resd 1
    total   resd 1

section .text
    global CMAIN

CMAIN:
    mov dword [total], 0

ask_n:
    PRINT_STRING p_n
    NEWLINE
    GET_UDEC 4, ecx         ; сразу в ecx
    test ecx, ecx
    jz  ask_n               ; если <=0 → повтор

    mov [count], ecx

read_loop:
    PRINT_STRING p_num
    NEWLINE
    GET_DEC 4, [number]

    mov eax, [number]
    add [total], eax

    loop read_loop          ; ecx--, если !=0 → повтор

    PRINT_STRING p_sum
    PRINT_DEC 4, [total]
    NEWLINE

    xor eax, eax
    ret
